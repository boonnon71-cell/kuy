<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</title>
<style>
*{
    box-sizing: border-box;
    font-family: "Segoe UI", Tahoma, sans-serif;
}
body{
    margin: 0;
    background: #1e1e1e;
}
/* Layout */
.wrapper{
    display: flex;
    min-height: 100vh;
}
/* Sidebar */
.sidebar{
    width: 240px;
    background: #ffffff;
    padding: 20px 15px;
    border-right: 1px solid #ddd;
}
.sidebar .logo{
    text-align: center;
    margin-bottom: 30px;
}
.sidebar .logo img{
    width: 80px;
}
.sidebar a{
    display: block;
    padding: 10px 12px;
    color: #222;
    text-decoration: none;
    border-radius: 6px;
    margin-bottom: 6px;
}
.sidebar a.active{
    color: #1976ff;
    font-weight: 600;
}
.sidebar a:hover{
    background: #f0f0f0;
}
/* Content */
.content{
    flex: 1;
    background: #f3f3f3;
}
/* Topbar */
.topbar{
    height: 60px;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 25px;
    border-bottom: 1px solid #ddd;
}
.breadcrumb{
    font-size: 14px;
    color: #444;
}
.user-menu{
    display: flex;
    align-items: center;
}
.user-group{
    display: flex;
    align-items: center;
    gap: 10px;   /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡πÅ‡∏ö‡∏ö‡πÉ‡∏ô‡∏£‡∏π‡∏õ */
}
/* ‡∏Å‡∏£‡∏∞‡∏î‡∏¥‡πà‡∏á */
.notification{
    position: relative;
    font-size: 22px;
    cursor: pointer;
    color: #000;
}

.notification:hover{
    opacity: 0.7;
}

/* badge */
.badge{
    position: absolute;
    top: -4px;
    right: -6px;
    background: red;
    color: #fff;
    font-size: 11px;
    font-weight: bold;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
/* Main */
.main{
    padding: 25px;
}
/* Patient Card */
.patient-card{
    background: #ffffff;
    border: 1px solid #999;
    border-radius: 16px;
    padding: 20px;
    display: flex;
    align-items: flex-start;
    margin-bottom: 18px;
}
.patient-photo{
    width: 90px;
    height: 90px;
    border: 1px solid #999;
    border-radius: 6px;
    margin-right: 20px;
}
.patient-info{
    flex: 1;
    display: grid;
    grid-template-columns: 1fr 1fr;
    row-gap: 8px;
    column-gap: 30px;
    font-size: 14px;
    color: #000;
}
/* ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏û‡∏ó‡∏¢‡πå */
.doctor{
    color: #1976ff;
    cursor: pointer;
}
/* Button */
.patient-action{
    margin-left: 20px;
}
.btn-confirm{
    background: #8a00c2;
    border: none;
    color: #ffffff;
    padding: 8px 18px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
}
.btn-confirm:hover{
    background: #7400a5;
}
/* ===== ‡πÄ‡∏°‡∏ô‡∏π‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ===== */
.patient-menu{
    position: relative;
    cursor: pointer;
    font-weight: 600;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á dropdown */
.patient-dropdown{
    position: absolute;
    top: 48px;              /* üîπ ‡∏î‡∏±‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
    left: 0;
    background: #ffffff;
    border: 1px solid #ddd;
    border-radius: 14px;
    min-width: 320px;
    padding: 10px 0;
    box-shadow: 0 10px 28px rgba(0,0,0,0.18);

    display: none;
    z-index: 999;
}
.topbar{
    position: relative;
}

/* ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô */
.dropdown-item{
    padding: 12px 20px;
    font-size: 14px;
    color: #222;
}

.dropdown-item:hover{
    background: #f3f6ff;
    color: #1976ff;
}
/* ===== ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢) ===== */
.clinic-menu{
    position: relative;
    padding: 10px 12px;
    border-radius: 6px;
    cursor: pointer;
    color: #222;
}

.clinic-menu:hover{
    background: #f0f0f0;
    color: #1976ff;
}

/* dropdown ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å */
.clinic-dropdown{
    position: absolute;
    top: 44px;          /* ‡∏î‡∏±‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ */
    left: 0;
    width: 220px;
    background: #ffffff;
    border: 1px solid #ddd;
    border-radius: 10px;
    box-shadow: 0 10px 28px rgba(0,0,0,0.18);

    display: none;
    z-index: 999;
}

/* ‡πÉ‡∏ä‡πâ dropdown-item ‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ */
.clinic-dropdown .dropdown-item{
    padding: 10px 14px;
    font-size: 14px;
}

.clinic-dropdown .dropdown-item:hover{
    background: #f3f6ff;
    color: #1976ff;
}
/* ===== Account ===== */
.account-box{
    display: flex;
    align-items: center;
    gap: 10px;

    background: #8e24aa; /* ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á */
    color: #fff;

    padding: 8px 14px;
    border-radius: 999px; /* ‡∏°‡∏ô‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏ñ‡∏ö */
    cursor: pointer;

    width: fit-content;
}

.account-box:hover{
    background: #7b1fa2;
}

/* ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏£‡∏π‡∏õ */
.avatar{
    width: 36px;
    height: 36px;
    background: #fff;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
}

.avatar img{
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
.account-text{
    font-size: 14px;
    font-weight: 500;
    white-space: nowrap;
}

/* ‡∏•‡∏π‡∏Å‡∏®‡∏£ */
.arrow{
    font-size: 14px;
}
.patient-card{
    cursor: pointer;
}

.patient-card:hover{
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    transform: translateY(-2px);
    transition: 0.2s;
}
.patient-photo img{
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
}
/* ===== Modal ===== */
.modal-overlay{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 30000;
}

.modal-box{
    background: #fff;
    padding: 24px 30px;
    border-radius: 16px;
    width: 360px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

.modal-box h3{
    margin-top: 0;
    margin-bottom: 10px;
}

.modal-box p{
    font-size: 14px;
    color: #444;
    margin-bottom: 20px;
}

.modal-actions{
    display: flex;
    justify-content: center;
    gap: 12px;
}

.btn-cancel{
    background: #ddd;
    border: none;
    padding: 8px 18px;
    border-radius: 20px;
    cursor: pointer;
}

.btn-cancel:hover{
    background: #ccc;
}
.goal-link{
    color: #000000;
    text-decoration: none;
    font-weight: 500;
    cursor: pointer;
}

.goal-link:hover{
    text-decoration: underline;
}
/* ===== Welcome Banner ===== */
.welcome-overlay{
    position:fixed;
    inset:0;
    background:rgba(5,8,20,.85);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:10000;
    animation: fadeIn .6s ease forwards;
}
.welcome-banner{
    position:relative;
    width:80%;
    max-width:720px;
    padding:30px 40px;
    background:linear-gradient(135deg,#1a1f3c,#0b0f1a);
    border-radius:14px;
    border:1px solid rgba(139,92,246,.6);
    box-shadow:0 0 25px rgba(139,92,246,.6);
    animation: slideIn .8s ease forwards, glowPulse 2.5s infinite;
}
.close-btn{
    position:absolute;
    top:14px;
    right:18px;
    font-size:22px;
    color:#fff;
    cursor:pointer;
    opacity:.7;
}
.close-btn:hover{opacity:1}
.banner-content{
    display:flex;
    align-items:center;
    gap:20px;
}
.banner-icon{
    font-size:48px;
    filter:drop-shadow(0 0 10px #8b5cf6);
}
.banner-text h1{
    margin:0;
    font-size:36px;
    color:#fff;
    letter-spacing:2px;
}
.banner-text h2{
    margin:6px 0 0;
    font-size:18px;
    font-weight:300;
    color:#c7d2fe;
}
.banner-text p{
    margin-top:6px;
    font-size:14px;
    color:#94a3b8;
}
@keyframes slideIn{
    from{transform:translateX(-60px);opacity:0}
    to{transform:translateX(0);opacity:1}
}
@keyframes fadeIn{
    from{opacity:0}
    to{opacity:1}
}
@keyframes glowPulse{
    0%,100%{box-shadow:0 0 18px rgba(139,92,246,.5)}
    50%{box-shadow:0 0 35px rgba(56,189,248,.9)}
}
/* ===== Account Dropdown ===== */
.account-wrapper{
    position: relative;
}

.account-dropdown{
    position: absolute;
    top: 58px;
    right: 0;
    width: 260px;
    background: #e0e0e0;
    border-radius: 6px;
    box-shadow: 0 10px 28px rgba(0,0,0,0.25);
    display: none;
    z-index: 1000;
}

/* Header */
.account-header{
    display: flex;
    gap: 12px;
    padding: 14px;
    background: #dcdcdc;
}

.account-avatar{
    width: 46px;
    height: 46px;
    border-radius: 50%;
    overflow: hidden;
    background: #000;
}

.account-avatar img{
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.account-name{
    font-weight: 600;
}

.account-role{
    font-size: 13px;
    color: #8a00c2;
}

/* Section */
.account-section{
    padding: 10px 14px;
}

.section-title{
    font-size: 13px;
    margin-bottom: 8px;
}

.account-item{
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 0;
    cursor: pointer;
}

.account-item:hover{
    background: #f0f0f0;
}

/* ‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
.circle-icon{
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #000;
}

/* Logout */
.account-logout{
    text-align: center;
    padding: 10px;
    margin: 10px;
    border: 1px solid red;
    color: red;
    cursor: pointer;
}

.account-logout:hover{
    background: rgba(255,0,0,0.08);
}
.no-doctor-title{
    font-size: 16px;
    font-weight: 600;
    color: #8a00c2;   /* ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏° */
    margin-bottom: 14px;
}
.account-logout{
    display: block;              /* ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô div */
    text-decoration: none;       /* ‡∏ï‡∏±‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÉ‡∏ï‡πâ */
    color: red;                  /* ‡∏™‡∏µ‡πÄ‡∏î‡∏¥‡∏° */
    text-align: center;
    padding: 10px;
    margin: 10px;
    border: 1px solid red;
    border-radius: 4px;          /* ‡∏ñ‡πâ‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏•‡∏ö‡πÑ‡∏î‡πâ */
    cursor: pointer;
}

.account-logout:hover{
    background: rgba(255,0,0,0.08);
}
.account-item,
.account-logout{
    text-decoration: none;
    color: inherit;
}
.breadcrumb a.active-page{
    color: #444;
    pointer-events: none;
    cursor: default;
}
/* ===== Game Notify ===== */
.game-notify{
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translate(-50%, 0);
    width: 420px;
    height: 90px;
    background: linear-gradient(135deg,#ff3b7d,#7f2bff);
    border-radius: 16px;
    box-shadow: 0 15px 40px rgba(0,0,0,.5);
    display: flex;
    align-items: center;
    padding: 12px;
    color: white;
    z-index: 20000;
    animation: slideDown .6s ease-out forwards;
}

.game-avatar{
    width: 64px;
    height: 64px;
    border-radius: 50%;
    overflow: hidden;
    border: 3px solid rgba(255,255,255,.7);
    margin-right: 14px;
    flex-shrink: 0;
}

.game-avatar img{
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.game-content{
    flex: 1;
}

.game-title{
    font-size: 18px;
    font-weight: 700;
}

.game-subtitle{
    font-size: 14px;
    opacity: .9;
}

.game-kill{
    font-size: 13px;
    font-weight: 700;
    opacity: .85;
}

/* animation */
@keyframes slideDown{
    from{
        transform: translate(-50%, -40px);
        opacity: 0;
    }
    to{
        transform: translate(-50%, 0);
        opacity: 1;
    }
}
/* ===== Doctor Contact Modal ===== */
.doctor-modal{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 20000;
}

.doctor-box{
    background: #ffffff;
    width: 380px;
    padding: 24px;
    border-radius: 18px;
    text-align: center;
    box-shadow: 0 20px 40px rgba(0,0,0,0.35);
    animation: fadeIn .3s ease;
}

.doctor-box h3{
    margin-top: 0;
    margin-bottom: 6px;
}

.doctor-role{
    font-size: 14px;
    color: #8a00c2;
    margin-bottom: 20px;
}

/* social buttons */
.social-group{
    display: flex;
    justify-content: center;
    gap: 14px;
}

.social-btn{
    padding: 8px 16px;
    border-radius: 20px;
    text-decoration: none;
    color: #fff;
    font-size: 14px;
    font-weight: 600;
    transition: .2s;
}

.fb{ background:#1877f2; }
.ig{ background:#e1306c; }
.tw{ background:#000; }

.social-btn:hover{
    opacity:.8;
}

.close-doctor{
    margin-top: 20px;
    background:#ddd;
    border:none;
    padding:6px 14px;
    border-radius:20px;
    cursor:pointer;
}
/* ===== History Layout ===== */
.history-container{
    display: flex;
    gap: 60px;
}

.history-left{
    flex: 2;
    font-size: 15px;
    line-height: 1.8;
}

.history-right{
    flex: 1;
}

.status-box{
    text-align: center;
    margin-bottom: 30px;
}

.history-photo{
    width: 140px;
    height: 140px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 10px;
}

.status-text{
    font-weight: 600;
}

.habit-section label{
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
}

.danger{
    color: red;
    font-weight: 600;
}

.safe{
    color: green;
    font-weight: 600;
}
.back-btn{
    background: none;
    border: none;
    font-size: 22px;
    font-weight: bold;
    cursor: pointer;
    margin-bottom: 20px;
    padding: 0;
}

.back-btn:hover{
    opacity: 0.7;
}
.edit-btn{
    background: #1976ff;
    color: #fff;
    border: none;
    padding: 8px 18px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 14px;
    margin-left: 10px;
}

.edit-btn:hover{
    background: #125ed6;
}

</style>
<script>
function loadDoctorProfile(){

    const doctorName = localStorage.getItem("doctorName");
    const doctorNameEN = localStorage.getItem("doctorNameEN");
    const accountNameEN = document.getElementById("accountDoctorNameEN");
    const doctorImage = localStorage.getItem("doctorImage");
// ===== ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå =====
const topAvatar = document.getElementById("topAvatar");
const dropdownAvatar = document.getElementById("dropdownAvatar");

if(doctorImage){
    topAvatar.src = doctorImage;
    dropdownAvatar.src = doctorImage;
}else{
    topAvatar.src = "Up.d.png";       // ‡∏£‡∏π‡∏õ default
    dropdownAvatar.src = "Up.d.png";
}

if(accountNameEN && doctorNameEN){
    accountNameEN.innerText = doctorNameEN;
}

    const doctorEmail = localStorage.getItem("doctorEmail");

    if(!doctorName){
        // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ login ‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πâ‡∏á‡∏Å‡∏•‡∏±‡∏ö
        window.location.href = "../index.html";
        return;
    }

    // ===== Welcome Banner =====
    const welcomeText = document.getElementById("welcomeDoctorName");
    if(welcomeText){
        welcomeText.innerText = doctorName;
    }

    // ===== Account Dropdown =====
    const accountName = document.getElementById("accountDoctorName");
    if(accountName){
        accountName.innerText = doctorName;
    }

    // ===== ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î Role ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ =====
    const roleText = document.getElementById("accountRole");

    if(doctorEmail && doctorEmail.startsWith("6802")){
        roleText.innerText = "‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡∏ô‡∏ï‡πÅ‡∏û‡∏ó‡∏¢‡πå ‡∏õ‡∏µ 4";
    }else{
        roleText.innerText = "‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå";
    }
}
window.addEventListener("load", loadDoctorProfile);

function togglePatientMenu(){
    const menu = document.getElementById("patientDropdown");
    if(menu.style.display === "block"){
        menu.style.display = "none";
    }else{
        menu.style.display = "block";
    }
}

/* ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î */
document.addEventListener("click", function(e){
    const menu = document.getElementById("patientDropdown");
    const button = document.querySelector(".patient-menu");

    if(!menu || !button) return;

    if(!button.contains(e.target)){
        menu.style.display = "none";
    }
});

let selectedPatient = null;
let selectedCard = null;

function openModal(patient, btn){
    selectedPatient = patient;
    selectedCard = btn.closest('.patient-card');
    document.getElementById("confirmModal").style.display = "flex";
}

function closeModal(){
    document.getElementById("confirmModal").style.display = "none";
}

function toggleAccountMenu(){
    const menu = document.getElementById("accountDropdown");
    menu.style.display = (menu.style.display === "block") ? "none" : "block";
}

/* ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î */
document.addEventListener("click", function(e){
    const wrapper = document.querySelector(".account-wrapper");
    const menu = document.getElementById("accountDropdown");

    if(wrapper && !wrapper.contains(e.target)){
        menu.style.display = "none";
    }
});
function removePatientsByClinic(clinicName){
    if(!clinicName) return;

    const targetClinic = clinicName.trim();
    const cards = document.querySelectorAll(".patient-card");

    cards.forEach(card => {
        const text = card.innerText;
        if(text.includes(targetClinic)){
            card.remove();
        }
    });
}



// ===== Global Telephone =====
let currentDoctorTel = "";

// ===== Doctor Database =====

function openDoctorContact(name){
    const modal = document.getElementById("doctorModal");
    const doctorName = document.getElementById("doctorName");

    doctorName.innerText = name;

    const doctor = doctorDatabase[name];

    if(doctor){
        document.getElementById("doctorFB").href = doctor.fb;
        document.getElementById("doctorIG").href = doctor.ig;
        currentDoctorTel = doctor.tel;
    }

    modal.style.display = "flex";
}

function closeDoctorModal(){
    document.getElementById("doctorModal").style.display = "none";
}

function showDoctorTel(){
    document.getElementById("telNumber").innerText = currentDoctorTel;
    document.getElementById("telModal").style.display = "flex";
}

function closeTelModal(){
    document.getElementById("telModal").style.display = "none";
}
function loadNotificationsFromDoctorPage(){

    let list = JSON.parse(localStorage.getItem("upcomingNotifications")) || [];

    if(list.length === 0) return;

    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï badge
    const badge = document.getElementById("notifyBadge");
    badge.innerText = list.length;
    badge.style.display = "flex";

    // ‡πÅ‡∏™‡∏î‡∏á Game Notify
    const notify = document.getElementById("acceptNotify");
    const subtitle = notify.querySelector(".game-subtitle");

    let message = "‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î:\n";

    list.forEach(p=>{
        message += `${p.name} ‡∏≠‡∏µ‡∏Å ${p.daysLeft} ‡∏ß‡∏±‡∏ô\n`;
    });

    subtitle.innerText = message;

    notify.style.display = "flex";

    setTimeout(()=>{
        notify.style.display = "none";
    },4000);
}
window.addEventListener("load", function(){
    loadNotificationsFromDoctorPage();
});

function goBack(){
    window.location.href = "historydocter.html";
}

let isEditing = false;
const editableFields = [
"name","gender","age","weight","height","phone",
"firstVisit","symptom","firstClinic","firstResult","caseType",
"referClinic1","firstDoctor","secondResult",
"treat1","treat2","treat3","treat4",
"xrayClinic","xrayDoctor","xrayDate",
"afterEffect","recallDate","finishDate",
"referClinic2","secondDoctor","thirdResult",
"treatA","treatB","treatC","treatD"
];

function toggleEdit(){

    const btn = document.getElementById("editBtn");

    if(!isEditing){

        editableFields.forEach(id => makeEditable(id));
        btn.innerText = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å";
        isEditing = true;

    }else{

        editableFields.forEach(id => saveData(id));
        btn.innerText = "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥";
        isEditing = false;
    }
}


function makeEditable(id){
    const element = document.getElementById(id);
    const value = element.innerText;
    element.innerHTML = `<input type="text" value="${value}" id="input-${id}" style="width:150px;">`;
}

function saveData(id){
    const input = document.getElementById("input-"+id);
    const value = input.value;

    localStorage.setItem("history_"+id, value);

    document.getElementById(id).innerText = value;
}

/* ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ */
window.addEventListener("load", function(){
    const editableFields = [
"name","gender","age","weight","height","phone",
"firstVisit","symptom","firstClinic","firstResult","caseType",
"referClinic1","firstDoctor","secondResult",
"treat1","treat2","treat3","treat4",
"xrayClinic","xrayDoctor","xrayDate",
"afterEffect","recallDate","finishDate",
"referClinic2","secondDoctor","thirdResult",
"treatA","treatB","treatC","treatD"
]
.forEach(id=>{
        const saved = localStorage.getItem("history_"+id);
        if(saved){
            document.getElementById(id).innerText = saved;
        }
    });
});


</script>

</head>
<body>
<div class="wrapper">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <img src="Up.d.png" alt="UP Logo">
        </div>
        <a href="../index.html">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="namedocter/docterindex.html" class="active">‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡∏ó‡∏¢‡πå</a>
    </div>
    <!-- Content -->
    <div class="content">
        <div class="topbar">
            <div class="breadcrumb"></div>
<div class="user-menu">
    <div class="user-group">
        <!-- ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ -->
        <div class="account-wrapper">
    <div class="account-box" onclick="toggleAccountMenu()">
        <div class="avatar">
            <img id="topAvatar" src="" alt="profile">
        </div>
        <span class="account-text">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</span>
        <span class="arrow">‚ñæ</span>
    </div>

    <!-- Account Dropdown -->
    <div class="account-dropdown" id="accountDropdown">

        <div class="account-header">
            <div class="account-avatar">
                <img id="dropdownAvatar" src="">
            </div>
            <div>
                <div class="account-name" id="accountDoctorName"></div>
                <div class="account-name-en" id="accountDoctorNameEN"></div>
                <div class="account-role" id="accountRole">‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå</div>
            </div>
        </div>

        <div class="account-section">
            <div class="section-title">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô</div>

            <a href="https://reg.up.ac.th/" class="account-item">
                <div class="circle-icon"></div>
                ‡∏£‡∏∞‡∏ö‡∏ö reg
            </a>

            <a href="https://ge.up.ac.th/" class="account-item">
                <div class="circle-icon"></div>
                ‡∏£‡∏∞‡∏ö‡∏ö ge-online
            </a>
        </div>

            <a href="logout.html" class="account-logout">
                ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
            </a>


    </div>
</div>

    </div>
</div>


        </div>
<div class="main">
<div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:20px;">
    
    <button class="back-btn" onclick="goBack()">
        &lt; ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
    </button>

    <button class="edit-btn" onclick="toggleEdit()" id="editBtn">
        ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
    </button>


</div>



    <div class="history-container">

        <!-- LEFT INFO -->
        <div class="history-left">

            <p><strong>‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•:</strong> <span id="name">‡∏ô‡∏≤‡∏¢‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏ô‡∏ô‡∏ó‡πå ‡∏ö‡∏∏‡∏ç‡∏õ‡∏±‡πã‡∏ô</span></p>
            <p><strong>‡πÄ‡∏û‡∏®:</strong> <span id="gender">‡∏ä‡∏≤‡∏¢</span></p>
            <p><strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> <span id="age">19</span> ‡∏õ‡∏µ</p>
            <p><strong>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å:</strong> <span id="weight">50.4</span> ‡∏Å‡∏Å.</p>
            <p><strong>‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á:</strong> <span id="height">180</span> ‡∏ã‡∏°.</p>
            <p><strong>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> <span id="phone">062-263-4564</span></p>
            <p><strong>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</strong> 20/09/2549</p>
            <p>
                <strong>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏¢‡∏≤:</strong> 
                <span class="danger">‡πÑ‡∏°‡πà‡∏°‡∏µ</span>
                &nbsp;&nbsp;
                <strong>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</strong> 
                <span class="safe">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•</span>
                &nbsp;&nbsp;
                <strong>‡∏°‡∏µ‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÑ‡∏´‡∏°:</strong> 
                <span class="danger">‡πÑ‡∏°‡πà‡∏°‡∏µ</span>
            </p>

            <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å:</strong> 
<span id="firstVisit">19 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568</span></p>

<p><strong>‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏≤:</strong> 
<span id="symptom">‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏≠‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏•‡∏≠‡∏ô‡∏ü‡∏±‡∏ô</span></p>

<p><strong>‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:</strong> 
<span id="firstClinic">‡∏ó‡∏±‡∏ô‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏û‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏£‡∏Ñ</span></p>

<p><strong>‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å:</strong> 
<span id="firstResult">‡∏õ‡∏£‡∏¥‡∏ó‡∏±‡∏ô‡∏ï‡πå‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö</span></p>

<p><strong>‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏™:</strong> 
<span id="caseType">‡πÄ‡∏Ñ‡∏™ P</span></p>

<p><strong>‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å:</strong> 
<span id="referClinic1">‡∏õ‡∏£‡∏¥‡∏ó‡∏±‡∏ô‡∏ï‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà : 20 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568</span></p>

<p><strong>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å:</strong> 
<span id="firstDoctor">‡∏ô‡∏ó‡∏û. ‡∏ì‡∏¥‡∏ä‡∏≤‡∏†‡∏±‡∏ó‡∏£ ‡∏ï‡∏£‡∏±‡∏¢‡∏£‡∏±‡∏ï‡∏ô‡πÄ‡∏°‡∏ò‡∏µ</span></p>

<p><strong>‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å2(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="secondResult">‡∏õ‡∏£‡∏¥‡∏ó‡∏±‡∏ô‡∏ï‡πå‡∏≠‡∏±‡∏Å‡πÄ‡∏™‡∏ö ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏ô‡∏Ñ‡∏∏‡∏î</span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å:</strong> 
<span id="treat1">‡∏Ç‡∏π‡∏î‡∏´‡∏¥‡∏ô‡∏õ‡∏π‡∏ô</span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≠‡∏á(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treat2">‡∏ñ‡∏≠‡∏ô‡∏ü‡∏±‡∏ô‡∏Ñ‡∏∏‡∏î</span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏°(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treat3"></span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏µ‡πà(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treat4"></span></p>

<p><strong>‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡∏£‡∏±‡∏á‡∏™‡∏µ(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="xrayClinic">‡∏ó‡∏±‡∏ô‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏±‡∏á‡∏™‡∏µ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà : 24 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568</span></p>

<p><strong>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏£‡∏±‡∏á‡∏™‡∏µ:</strong> 
<span id="xrayDoctor">‡∏ô‡∏ó‡∏û. ‡∏ì‡∏¥‡∏ä‡∏≤‡∏†‡∏±‡∏ó‡∏£ ‡∏ï‡∏£‡∏±‡∏¢‡∏£‡∏±‡∏ï‡∏ô‡πÄ‡∏°‡∏ò‡∏µ</span></p>

<p><strong>‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏£‡∏±‡∏á‡∏™‡∏µ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> 
<span id="xrayDate">24 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2568</span></p>

<p><strong>‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="afterEffect"></span></p>

<p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà Recall ‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢:</strong> 
<span id="recallDate"></span></p>

<p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤:</strong> 
<span id="finishDate"></span></p>

<p><strong>‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÑ‡∏õ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å:</strong> 
<span id="referClinic2">‡∏®‡∏±‡∏•‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏≤‡∏Å ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà : 18 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2569</span></p>

<p><strong>‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•:</strong> 
<span id="secondDoctor">‡∏ô‡∏ó‡∏û. ‡∏™‡∏∏‡∏†‡∏≤‡∏©‡∏¥‡∏ï ‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏ö‡∏∏‡∏ï‡∏£</span></p>

<p><strong>‡∏ú‡∏•‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏≤‡∏Å‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å3(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="thirdResult">‡∏ñ‡∏≠‡∏ô‡∏ü‡∏±‡∏ô‡∏Ñ‡∏∏‡∏î</span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å:</strong> 
<span id="treatA">‡∏ñ‡∏≠‡∏ô‡∏ü‡∏±‡∏ô‡∏Ñ‡∏∏‡∏î</span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≠‡∏á(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treatB"></span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏≤‡∏°(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treatC"></span></p>

<p><strong>‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏™‡∏µ‡πà(‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</strong> 
<span id="treatD"></span></p>

        </div>

        <!-- RIGHT INFO -->
        <div class="history-right">

            <div class="status-box">
                <img src="non.jpg" class="history-photo">
                <div class="status-text">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ : ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤</div>
            </div>

            <div class="habit-section">
                <p><strong>‡∏Å‡∏≤‡∏£‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà :</strong></p>
                <label><input type="checkbox"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà</label>
                <label><input type="checkbox"> ‡πÄ‡∏Ñ‡∏¢‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà</label>
                <label><input type="checkbox"> ‡∏™‡∏π‡∏ö‡∏ö‡∏∏‡∏´‡∏£‡∏µ‡πà</label>

                <p style="margin-top:15px;"><strong>‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏™‡∏∏‡∏£‡∏≤ :</strong></p>
                <label><input type="checkbox"> ‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏î‡∏∑‡πà‡∏°‡∏™‡∏∏‡∏£‡∏≤</label>
                <label><input type="checkbox"> ‡πÄ‡∏Ñ‡∏¢‡∏î‡∏∑‡πà‡∏°‡∏™‡∏∏‡∏£‡∏≤</label>
                <label><input type="checkbox"> ‡∏î‡∏∑‡πà‡∏°‡∏™‡∏∏‡∏£‡∏≤</label>
            </div>

        </div>

    </div>

</div>

            </div>
        </div>

</body>
</html>